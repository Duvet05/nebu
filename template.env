# ===========================================
# NEBU MOBILE - TEMPLATE ACTUALIZADO
# ===========================================
# Variables de entorno que REALMENTE se usan en el backend
# Copia este archivo como .env y personaliza los valores

# ===========================================
# ENTORNO
# ===========================================
NODE_ENV=development
PORT=3001

# ===========================================
# APLICACIÓN
# ===========================================
APP_NAME=Nebu Mobile
APP_VERSION=1.0.0
APP_DESCRIPTION=AI-Powered IoT & Voice Control Platform
SUPPORT_EMAIL=support@nebu.com

# ===========================================
# BASE DE DATOS - PostgreSQL
# ===========================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=nebu_user
DATABASE_PASSWORD=nebu_password_2024!
DATABASE_NAME=nebu_db
DATABASE_SSL=false

# ===========================================
# REDIS - Cache y Sessions
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=300
REDIS_KEY_PREFIX=nebu:

# ===========================================
# AUTENTICACIÓN - JWT
# ===========================================
JWT_SECRET=dev_jwt_secret_change_in_production_2024
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_SECRET=dev_refresh_secret_change_in_production_2024
REFRESH_TOKEN_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# Seguridad y límites de sesión (usados en auth.config.ts)
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=15m
SESSION_TIMEOUT=30m
MAX_CONCURRENT_SESSIONS=3
PASSWORD_RESET_EXPIRES_IN=1h
EMAIL_VERIFICATION_EXPIRES_IN=24h

# ===========================================
# LIVEKIT - Audio/Video Tiempo Real
# ===========================================
LIVEKIT_URL=wss://your-livekit-server.livekit.cloud
LIVEKIT_API_KEY=your_livekit_api_key
LIVEKIT_API_SECRET=your_livekit_api_secret
LIVEKIT_WS_URL=wss://your-livekit-server.livekit.cloud

# ===========================================
# URLs Y CORS
# ===========================================
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:3001
ALLOW_LOCALHOST_CORS=true

# SEGURIDAD: Modo especial para dispositivos IoT (ESP32)
# Solo activar si tienes ESP32/dispositivos que no manejan CORS o certificados HTTPS
# WARNING: En producción, esto permite CORS desde cualquier origen cuando está en true
IOT_ALLOW_ALL_ORIGINS=false

# ===========================================
# RESEND - EMAIL DELIVERY (Reemplaza SMTP)
# ===========================================
RESEND_API_KEY=your_resend_api_key_here
FROM_EMAIL=send@your-domain.com
TO_EMAIL=admin@your-domain.com

# ===========================================
# CULQI - PAGOS (Perú)
# ===========================================
CULQI_SECRET_KEY=sk_test_your_culqi_secret_key_here
CULQI_PUBLIC_KEY=pk_test_your_culqi_public_key_here

# ===========================================
# EMAIL/SMTP (Opcional - para notificaciones)
# ===========================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM=noreply@nebu.com
ENABLE_EMAIL_NOTIFICATIONS=false

# Configuración de pagos (usada en payments.config.ts)
MIN_PURCHASE_AMOUNT=5
MAX_PURCHASE_AMOUNT=10000
MAX_DAILY_SPEND=25000
MAX_MONTHLY_SPEND=100000
DEFAULT_CURRENCY=USD
ALLOWED_CURRENCIES=USD,EUR,MXN

# ===========================================
# CARACTERÍSTICAS/FEATURES
# ===========================================
ENABLE_ANALYTICS=true
ENABLE_WEBSOCKET=true
ENABLE_CHAT=true
ENABLE_NOTIFICATIONS=true

# ===========================================
# NOTAS IMPORTANTES
# ===========================================
# 1. Copia este archivo como .env en la carpeta backend/
# 2. Reemplaza todos los valores "your_*_here" con tus credenciales reales
# 3. NUNCA subas el archivo .env al repositorio
# 4. Para producción, cambia todos los secretos y contraseñas
# 5. Las variables opcionales (Stripe, Cloudinary, SMTP) pueden omitirse si no las usas
# 6. Este template solo incluye variables que REALMENTE se usan en el código
# 7. Template completo original guardado en template.env.backup

# ===========================================
# CHROMADB - Base de Datos Vectorial
# ===========================================
# ChromaDB para memoria contextual y búsqueda semántica
CHROMA_URL=http://chromadb:8000
CHROMA_TELEMETRY=FALSE
CHROMA_AUTH_PROVIDER=
CHROMA_AUTH_CREDENTIALS=

# ===========================================
# OPENAI - Para Embeddings y Resúmenes
# ===========================================
# Obtener API Key en: https://platform.openai.com/api-keys
# Usado para:
# - Generar embeddings (text-embedding-3-small) - ~$0.00002/1K tokens
# - Crear resúmenes de sesiones (GPT-4) - ~$0.03/1K tokens
# - Extraer insights de conversaciones
OPENAI_API_KEY=sk-your-openai-api-key-here

# ===========================================
# MEMORY CONFIGURATION - Sistema de Memoria Contextual
# ===========================================
# Días de retención para memorias episódicas (recomendado: 30-90 días)
MEMORY_RETENTION_DAYS=30

# Habilitar decaimiento natural de memoria (simula olvido humano)
# Decay rate: 1% por día
ENABLE_MEMORY_DECAY=true

# ===========================================
# VARIABLES DE PRODUCCIÓN
# ===========================================
ACME_EMAIL=admin@your-domain.com
DOMAIN=your-domain.com
ENABLE_OAUTH=false
LOG_LEVEL=info

# Rate Limiting
RATE_LIMIT_TTL=60000
RATE_LIMIT_LIMIT=100
